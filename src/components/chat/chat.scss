@mixin bubble {
	height: 80px;
	width: 80px;
	border-radius: 80px;
	box-shadow: 3px 3px 7px 0 rgba(0,0,0,0.4);
	cursor: pointer;
}
chat-bubble {
	&.is-hidden {
		.chat-bubble-btn {
			transform: scale(0);
		}
	}
	&.default {
		.chat-bubble-btn {
			transform: scale(1);
		}
	}
	&.has-notification {
		.chat-bubble-btn {
			transform: scale(1);
		}
		.notification {
			transform: scale(1);
		}
	}
	&.is-long-press {
		.chat-bubble-btn {
			transform: scale(0.7);
			transition: transform .2s ease-out;
		}
		.close-btn {
			transform: scale(1);
		}
	}
	.chat-bubble-btn {
		@include bubble;
		background-image: url('assets/avatar.jpg');
		background-size: cover;
		bottom: 25px;
		right: 25px;
		z-index: 150;
		transform: scale(0);
		transition: transform .4s ease-out;
		position: fixed;
	}
	.close-btn {
		@include bubble;
		background-color: $accent-light-color;
		position: fixed;
		right: 80px + 25px + 25px;
		bottom: 25px;
		transition: transform .4s ease-out;
		transform: scale(0);
		color: white;
		z-index: 150;
		text-align: center;
	}
	.notification {
		position: fixed;
		right: 124px;
		bottom: 48px;
		z-index: 150;
		font-size: 14px;
		width: 128px;
		background-color: $accent-color-dark;
		color: #FFF;
		height: 33px;
		border-radius: 4px;
		padding: 4px 9px;
		box-shadow: 2px 2px 7px 1px rgba(0,0,0,0.2);
		will-change: transform;
		transform: scale(0);
		transform-origin: right;
		transition: transform .3s cubic-bezier(.54,.37,.37,.99);
	}
}

chat {
	position: fixed;
	height: calc(100% - 160px);
	width: calc(100% - 60px);
	background-color: white;
	box-shadow: 3px 3px 7px 2px rgba(0, 0, 0, 0.2);
	bottom: 130px;
	right: 30px;
	z-index: 140;
	will-change: transform;
	transform: scale(0);
	transform-origin: bottom right;
	transition: transform .4s cubic-bezier(.54,.37,.37,.99);
	&.is-active {
		transform: scale(1);
	}
	.title-bar {
		height: 50px;
		display: block;
		background-color: darken(dimgray, 10%);
		padding: 0 10px;
		.title {
			font-family: 'Roboto Slab', sans-serif;
			font-weight: 300;
			display: inline-block;
			color: white;
		}
	}
	.chat-content {
		width: 100%;
		padding: 1em;
		height: calc(100% - 100px);
		display: block;
		overflow-x: hidden;
	}
	.chat-message {
		padding: 0.5em;
		margin-bottom: 1em;
		color: white;
		transform-origin: top;
		&.admin {
			background-color: $accent-color;
			animation: adminMessageReveal .4s ease-out 1;
		}
		&.user {
			background-color: lighten($accent-color, 10%);
			animation: userMessageReveal .4s ease-out 1;
		}
		.chat-message-author {
			font-family: 'Roboto', sans-serif;
			opacity: .7;
		}
	}
	.chat-input {
		display: block;
		width: 100%;
		height: 50px;
		border: 0;
		padding: 0 15px;
		background-color: darken(white, 10%);
		box-shadow: none !important;
		border: none !important;
		outline: none;
		transition: background-color .3s;
		&:focus {
			background-color: darken(white, 15%);
		}
		& + .glyphicon {
			position: relative;
			top: -39px;
			left: calc(100% - 58px);
			display: inline-block;
			height: 50px;
			width: 50px;
			text-align: center;
			font-size: 27px;
			color: gray;
			vertical-align: middle;
		}
	}
}
@keyframes adminMessageReveal {
	0% {
		transform: translateX(-100%);
	}
	100% {
		transform: translateX(0);
	}
}
@keyframes userMessageReveal {
	0% {
		transform: translateX(100%);
	}
	100% {
		transform: translateX(0);
	}
}